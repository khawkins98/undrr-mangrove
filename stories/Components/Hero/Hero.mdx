import { Meta, Story, Canvas } from '@storybook/blocks';
import { Hero } from './Hero';
import * as HeroStories from './Hero.stories';

<Meta of={HeroStories} />

# MANGROVE HERO (Main)

The Mangrove Hero components are page sections with images and overlay colors for primary, secondary, tertiary, and quaternary variants.

## Overview

The Mangrove Hero component defines a section with an image, some text, and optional CTA buttons. It is highly customizable and can be styled in four different variants: primary, secondary, tertiary, and quaternary.

### When to use:

Use this component when you want to display a prominent section with an image background, title, text, and optional action buttons.

## New Features

### 1. Conditional Rendering of Headline
- If the `link` is present in the `data`, the title will be rendered as an `<a>` (anchor) tag.
- If no `link` is provided, the title will be rendered as an appropriate header tag (e.g., `<h1>`).

#### Example

If the content has no link:

```jsx
<h1 class="text-xxl">Title without a link</h1>
```

If the content has a valid link:

```jsx
<a href="/#" class="text-xxl">Title with a link</a>
```

### 2. Support for HTML in Title and Summary Fields
The `title` and `summaryText` fields now support the inclusion of HTML elements such as `<br>` (line breaks) and `&nbsp;` (non-breaking spaces) to allow more control over the formatting of the text.

#### Example

```jsx
<span dangerouslySetInnerHTML={{ __html: "This is a title with a<br>&nbsp;line break" }} />
```

## Example Stories

### 1. Default (Locale-based Content)

This story uses the `getCaptionForLocale` function to provide locale-specific content.

<Canvas>
  <Story
    args={{
      variant: "primary",
    }}
    globals={{
      locale: "english",
    }}
  />
</Canvas>

### 2. NoLink (Headline Without a Link)

This story shows a headline without a valid link, which renders the title as an `<h1>` tag.

<Canvas>
  <Story
    of={HeroStories.NoLink}
    args={{
      data: [
        {
          title: "Title without a link<br>&nbsp;and a line break",
          summaryText:
            "This summary supports HTML.<br>&nbsp;Here is some extra text with a line break.",
          link: null,
          imgback: "https://www.undrr.org/sites/default/files/2020-01/Home---about-us_0.jpg",
        },
      ],
      variant: "secondary",
    }}
  />
</Canvas>

### 3. WithHtmlInTitle (Custom Title with HTML)

This story shows a headline with custom HTML and a valid link, which renders the title as an `<a>` tag.

<Canvas>
  <Story
    of={HeroStories.WithHtmlInTitle}
    args={{
      data: [
        {
          title: "Custom title<br>&nbsp;with line breaks and spaces",
          summaryText: "This is custom summary text.<br>&nbsp;Another line.",
          link: "/#", 
          imgback: "https://www.undrr.org/sites/default/files/2020-01/Home---about-us_0.jpg",
        },
      ],
      variant: "tertiary",
    }}
  />
</Canvas>

### CSS and JS References

#### CSS:
Include the following styles for layout and design:
- [Mangrove CSS](https://unisdr.github.io/undrr-mangrove/css/style-gutenberg.css)

#### JS:
No additional JavaScript is required.

## Interactions

- Clicking on the title (if it has a link) or CTA buttons triggers the associated action (navigating to the link or executing a JavaScript function).

## Changelog

### Version 1.1 — Latest Update
- **Locale-based content with `getCaptionForLocale`**: The `Hero` component can now switch between different locales to display localized content.
- **Conditional headline rendering**: The headline now dynamically chooses between an anchor tag (`<a>`) and a header tag (`<h1>`) based on the presence of a `link`.
- **HTML support in text fields**: The `title` and `summaryText` fields now support raw HTML like `<br>` and `&nbsp;` for enhanced formatting control.

### Version 1.0 — Initial Release
- Introduced the Mangrove Hero component with customizable background images, text, and CTA buttons.

<Canvas>
  <Story of={HeroStories.Default} />
</Canvas>

